<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FitLife | Aluno</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/style.css">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    
    <style>
        /* --- ESTILOS DO MENU LATERAL E CABE√áALHO --- */
        body { padding-top: 60px; padding-bottom: 20px; }

        /* Barra de Topo Fixa */
        .app-header {
            position: fixed; top: 0; left: 0; width: 100%; height: 60px;
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255,255,255,0.1);
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 1.5rem; z-index: 50;
        }

        .menu-btn { background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer; }
        .logo-small { font-weight: 700; font-size: 1.1rem; }
        .logo-small span { color: var(--primary-color); }
        .user-avatar-small { width: 35px; height: 35px; border-radius: 50%; border: 2px solid var(--primary-color); }

        /* Sidebar (Menu Lateral) */
        .sidebar-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); z-index: 900;
            opacity: 0; visibility: hidden; transition: all 0.3s;
        }
        .sidebar-overlay.active { opacity: 1; visibility: visible; }

        .mobile-sidebar {
            position: fixed; top: 0; left: 0; width: 280px; height: 100%;
            background: #121212; border-right: 1px solid #333;
            z-index: 1000;
            transform: translateX(-100%); transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex; flex-direction: column;
            padding: 2rem 1.5rem;
        }
        .mobile-sidebar.active { transform: translateX(0); }

        .sidebar-profile { text-align: center; margin-bottom: 2rem; }
        .sidebar-profile img { width: 80px; height: 80px; border-radius: 50%; border: 3px solid var(--primary-color); margin-bottom: 10px; }
        .sidebar-profile h3 { font-size: 1.1rem; color: white; }
        .sidebar-profile p { font-size: 0.85rem; color: #888; }

        .sidebar-nav a {
            display: flex; align-items: center; gap: 12px;
            padding: 12px 15px;
            color: #ccc; text-decoration: none;
            border-radius: 8px; margin-bottom: 5px;
            transition: 0.2s;
        }
        .sidebar-nav a:hover, .sidebar-nav a.active { background: rgba(0, 255, 136, 0.1); color: var(--primary-color); }
        .sidebar-nav a.locked { opacity: 0.5; cursor: not-allowed; }
        .badge-lock { font-size: 0.7rem; background: #333; padding: 2px 6px; border-radius: 4px; margin-left: auto; }

        /* Estilos da Tela Anamnese */
        .anamnese-form { background: var(--surface-color); padding: 1.5rem; border-radius: 12px; border: 1px solid rgba(255,255,255,0.05); }
        .anamnese-group { margin-bottom: 1.5rem; }
        .anamnese-group label { display: block; color: var(--primary-color); margin-bottom: 0.5rem; font-size: 0.9rem; }
        .anamnese-input { width: 100%; background: #000; border: 1px solid #333; color: white; padding: 10px; border-radius: 8px; }

        /* Utilit√°rios */
        .hidden { display: none !important; }
        .workout-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 1rem; padding: 1.5rem; }
        .workout-card-select { background: linear-gradient(145deg, var(--surface-color), #1a1a1a); border: 1px solid rgba(255,255,255,0.05); border-radius: 16px; padding: 1.5rem; cursor: pointer; text-align: center; }
        .workout-card-select:hover { border-color: var(--primary-color); transform: translateY(-3px); }

        /* Timer e Feedback (Mesmo de antes) */
        .timer-overlay { position: fixed; bottom: 20px; right: 20px; left: 20px; background: #1a1a1a; border: 1px solid var(--primary-color); padding: 15px; border-radius: 12px; display: flex; justify-content: space-between; align-items: center; transform: translateY(200%); transition: transform 0.3s; z-index: 100; }
        .timer-overlay.active { transform: translateY(0); }
        .feedback-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 200; display: flex; align-items: center; justify-content: center; padding: 20px; }
        .feedback-card { background: var(--surface-color); padding: 2rem; border-radius: 16px; width: 100%; max-width: 400px; text-align: center; border: 1px solid var(--primary-color); }
        .rpe-scale { display: flex; justify-content: space-between; margin: 20px 0; gap: 5px; }
        .rpe-btn { flex: 1; padding: 10px 0; background: #333; border: none; color: white; border-radius: 8px; }
        .rpe-btn.selected { background: var(--primary-color); color: black; transform: scale(1.1); }
    </style>
</head>
<body>

    <header class="app-header">
        <button class="menu-btn" id="openMenuBtn"><i class="ph ph-list"></i></button>
        <div class="logo-small">Fit<span>Life</span></div>
        <img id="headerAvatar" src="" class="user-avatar-small" alt="User">
    </header>

    <div class="sidebar-overlay" id="sidebarOverlay"></div>
    <aside class="mobile-sidebar" id="mobileSidebar">
        <div class="sidebar-profile">
            <img id="sidebarAvatar" src="" alt="User">
            <h3 id="sidebarName">Carregando...</h3>
            <p id="sidebarEmail">...</p>
        </div>
        
        <nav class="sidebar-nav">
            <a href="#" class="nav-link active" data-target="view-home">
                <i class="ph ph-barbell"></i> Meus Treinos
            </a>
            <a href="#" class="nav-link" data-target="view-anamnese">
                <i class="ph ph-clipboard-text"></i> Anamnese
            </a>
            <a href="#" class="nav-link locked">
                <i class="ph ph-ruler"></i> Avalia√ß√£o F√≠sica <span class="badge-lock"><i class="ph ph-lock"></i></span>
            </a>
            <a href="#" class="nav-link locked">
                <i class="ph ph-gear"></i> Configura√ß√µes <span class="badge-lock"><i class="ph ph-lock"></i></span>
            </a>
            <div style="margin-top: auto; padding-top: 2rem; border-top: 1px solid #333;">
                <a href="#" id="logoutBtnSide" style="color: #ff4d4d;">
                    <i class="ph ph-sign-out"></i> Sair
                </a>
            </div>
        </nav>
    </aside>

    <div id="view-home" class="view-section">
        <div style="padding: 1rem 1.5rem;">
            <h2 style="font-size: 1.2rem;">Ol√°, <span id="userName" style="color: var(--primary-color);">Atleta</span>!</h2>
            <p style="color: var(--text-muted); font-size: 0.9rem;">Pronto para evoluir hoje?</p>
        </div>

        <div id="workoutCardsContainer" class="workout-grid">
            <p style="color: #666; padding: 1.5rem;">Carregando seus treinos...</p>
        </div>
    </div>

    <div id="view-workout" class="view-section hidden">
        <div style="padding: 1rem 1.5rem; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid rgba(255,255,255,0.1);">
            <button id="backToHomeBtn" style="background:none; border:none; color:white; font-size:1.2rem;"><i class="ph ph-arrow-left"></i></button>
            <span id="activeWorkoutTitle" style="font-weight: bold; color: var(--primary-color);">Treino</span>
            <button id="finishBtn" class="btn-sm" style="background: var(--primary-color); color: black; padding: 5px 15px;">FIM</button>
        </div>
        <div id="workoutList" style="padding: 1rem 1.5rem;"></div>
    </div>

    <div id="view-anamnese" class="view-section hidden" style="padding: 1.5rem;">
        <h2 style="margin-bottom: 1.5rem;">Ficha de Anamnese</h2>
        <div class="anamnese-form">
            <div class="anamnese-group">
                <label>Objetivo Principal</label>
                <select id="anamneseGoal" class="anamnese-input">
                    <option value="hipertrofia">Hipertrofia (Ganhar Massa)</option>
                    <option value="emagrecimento">Emagrecimento</option>
                    <option value="resistencia">Resist√™ncia / Condicionamento</option>
                    <option value="saude">Sa√∫de / Qualidade de Vida</option>
                </select>
            </div>
            <div class="anamnese-group">
                <label>Possui les√µes ou dores cr√¥nicas?</label>
                <textarea id="anamneseInjuries" class="anamnese-input" rows="3" placeholder="Ex: Dor no joelho direito ao agachar..."></textarea>
            </div>
            <div class="anamnese-group">
                <label>Uso de medicamentos?</label>
                <input type="text" id="anamneseMeds" class="anamnese-input" placeholder="Se sim, quais?">
            </div>
            <button id="saveAnamneseBtn" class="btn-login">SALVAR DADOS</button>
        </div>
    </div>

    <div id="view-feedback" class="feedback-overlay hidden">
        <div class="feedback-card">
            <h2>Treino Conclu√≠do! üî•</h2>
            <p style="color: #aaa; margin-bottom: 1rem;">Intensidade (PSE)</p>
            <div class="rpe-scale" id="rpeContainer">
                <button class="rpe-btn" data-val="1" style="background: #2ecc71;">1</button>
                <button class="rpe-btn" data-val="2" style="background: #a9dfbf; color:black;">2</button>
                <button class="rpe-btn" data-val="3" style="background: #f1c40f; color:black;">3</button>
                <button class="rpe-btn" data-val="4" style="background: #e67e22;">4</button>
                <button class="rpe-btn" data-val="5" style="background: #e74c3c;">5</button>
            </div>
            <p id="rpeText" style="font-size:0.8rem; margin-bottom:15px; min-height:1.2em;">...</p>
            <textarea id="feedbackComment" class="anamnese-input" rows="3" placeholder="Coment√°rios sobre o treino..."></textarea>
            <button id="submitFeedbackBtn" class="btn-login" style="margin-top:10px;">ENVIAR FEEDBACK</button>
        </div>
    </div>

    <div id="restTimer" class="timer-overlay">
        <div>
            <div style="font-size: 0.8rem; color: #aaa;">Descanso</div>
            <div id="timerDisplay" style="font-size: 1.5rem; font-weight: bold; color: var(--primary-color);">00:00</div>
        </div>
        <div style="display: flex; gap: 10px;">
            <button onclick="window.addTime(10)" style="padding: 5px 10px; background: #333; color: white; border: none; border-radius: 4px;">+10s</button>
            <button id="closeTimerBtn" style="padding: 5px 10px; background: #ff4d4d; color: white; border: none; border-radius: 4px;">Parar</button>
        </div>
    </div>

    <script type="module" src="assets/user-dashboard.js"></script>
</body>
</html>
